== Remote browsers

_Selenium-Jupiter_ also supports remote browsers, using a https://seleniumhq.github.io/docs/site/en/grid/[Selenium Grid] server. To that aim, a couple of custom annotations can be used:

* `DriverUrl` (_parameter-level_ or _field-level_): Annotation used to identify the URL value needed to instantiate a `RemoteWebDriver` object. This URL can be setup using the configuration key `sel.jup.selenium.server.url`. This value can be used to use browsers from cloud providers, such as https://saucelabs.com/[Saucelabs] or https://www.browserstack.com/[BrowserStack].
* `DriverCapabilities` (_parameter-level_ or _field-level_): Annotation to configure the desired _capabilities_ (WebDriver's object `DesiredCapabilities`).

=== Using capabilities

The annotation `@DriverCapabilities` is used to specify WebDriver capabilities (i.e. type browser, version, platform, etc.). These capabilities are typically used for Selenium Grid tests (i.e. tests using remote browsers). To that aim, a Selenium Hub (also known as _Selenium Server_) should be up an running, and its URL should known. This URL will be specified using the _Selenium-Jupiter_ annotation `@DriverUrl`. 

The following example provides a complete https://github.com/bonigarcia/selenium-jupiter/blob/master/src/test/java/io/github/bonigarcia/seljup/test/advance/RemoteWebDriverJupiterTest.java[example] about this. As you can see, in the test setup (`@BeforeAll`) a Selenium Grid is implemented, first starting a Hub (a.k.a. _Selenium Server_), and then a couple of nodes (Chrome a Firefox) are registered in the Hub. Therefore, remote test using `RemoteWebDriver` can be executed, simply pointing to the Hub (whose URL in this case is `http://localhost:4444/wd/hub` in this example) and selecting the browser to be used using the `Capabilities`.

[source,java]
----
include::../../test/java/io/github/bonigarcia/seljup/test/advance/RemoteWebDriverJupiterTest.java[tags=snippet-in-doc,indent=0]
----

The following class contains an example which uses Chrome as browser and capabilities defined using `@DriverCapabilities`. Concretely, this example uses the mobile emulation feature provided out of the box by Chrome (i.e. render the web page using small screen resolutions to emulate smartphones).

[source,java]
----
include::../../test/java/io/github/bonigarcia/seljup/test/advance/ChromeWithGlobalCapabilitiesJupiterTest.java[tags=snippet-in-doc,indent=0]
----

=== Mobile testing with Appium

The annotation `@DriverCapabilities` can be also used to specify the desired capabilities to create an instances of AppiumDriver to drive mobile devices (Android or iOS). If not `@DriverUrl` is specified, _Selenium-Jupiter_ will start automatically an instance of Appium Server (by default in port 4723) in the localhost after each test execution (this server is shutdown before each test). For example:

[source,java]
----
include::../../test/java/io/github/bonigarcia/seljup/test/appium/AppiumChromeJupiterTest.java[tags=snippet-in-doc,indent=0]
----

We can also specify a custom Appium Server URL changing the value of `@DriverUrl`, at field-level or parameter-level:

[source,java]
----
include::../../test/java/io/github/bonigarcia/seljup/test/appium/AppiumWithGlobalOptionsChromeJupiterTest.java[tags=snippet-in-doc,indent=0]
----

=== Using SauceLabs

_Selenium-Jupiter_ can be used to control remote browsers in the https://saucelabs.com/[SauceLabs] cloud.

In the following example, first the `@DriverUrl` is used to specify the SauceLabs URL. Then the annotation `@DriverCapabilities` is used to configure the SauceLabs credentials (_username_ and _accessKey_) together with the desired capabilities. In the example we use Chrome 59.0 in Windows 10:

[source,java]
----
include::../../test/java/io/github/bonigarcia/seljup/test/advance/SauceLabsJupiterTest.java[tags=snippet-in-doc,indent=0]
----

As usual, the execution of the test can be seen in the SauceLabs dashboard:

[.thumb]
.SauceLabs dashboard
image::saucelabs.png[scaledwidth=100%]


=== Using Selenide

_Selenium_Jupiter_ allows to control remote browsers also with Selenide. To do that, we simply need to declare `SelenideDriver` parameters in conjunction with the annotations `@DriverUrl` (to specify the Selenium Server URL) and `@DriverCapabilities` (to specify the desired capabilities). These annotations can be used both at parameter-level (applied to a single object) and field-level (applied globally in a test class).

The following test shows an example of both usages. On the other hand, the first test uses a `SelenideDriver` object which is going to connect to the Selenium Server given in the field `url` and with desired capabilities given in `capabilities` (i.e. Firefox). On the other hand, the second declares another `SelenideDriver` parameter configured to use the same Selenium Server in the localhost, but requesting a Chrome browser for this test.

[source,java]
----
include::../../test/java/io/github/bonigarcia/seljup/test/selenide/SelenideRemoteJupiterTest.java[tags=snippet-in-doc,indent=0]
----
